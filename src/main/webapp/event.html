<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>
 <head>
 	<link rel="icon" type="image/x-icon" href="/DJ-Agenda-2/favicon.ico" />
 	<title>Événements DJ</title>
    <meta charset='utf-8' />
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>
    <style>.fc-tooltip {
    position: absolute;
    z-index: 9999;
    padding: 5px;
    background-color: rgba(0, 0, 0, 0.8); /* Couleur de fond avec transparence */
    color: white; /* Couleur du texte */
    border-radius: 5px;
    font-size: 14px;
    font-family: Arial, sans-serif;
}
    </style>
    <script>

    document.addEventListener('DOMContentLoaded', function() {
    	  var calendarEl = document.getElementById('calendar');
    	  var calendar = new FullCalendar.Calendar(calendarEl, {
    	    initialView: 'dayGridMonth',
    	    locale: 'fr', // Spécifier la locale française
    	    firstDay: 1,
    	    events: [ // Ajouter un tableau d'événements
    	        {
    	          title: 'Événement 1',
    	          start: '2024-04-01',
    	          end: '2024-03-02',
    	          description: 'Look at me!'
    	        },
    	        {
    	          title: 'Événement 2',
    	          start: '2024-04-05',
    	          end: '2024-04-06'
    	        },
    	  	],
    	  	eventDidMount: function(info) {
                var tooltip = document.createElement('div');
                tooltip.className = 'fc-tooltip';
                tooltip.textContent = info.event.title + ' - ' + info.event.extendedProps.description;
                
                // Positionner l'info-bulle à côté de la souris
                document.body.appendChild(tooltip);
                tooltip.style.position = 'absolute';
                tooltip.style.display = 'none'; // Caché par défaut
                
                info.el.addEventListener('mouseover', function(event) {
                    tooltip.style.left = event.pageX + 'px';
                    tooltip.style.top = (event.pageY - tooltip.offsetHeight - 10) + 'px'; // Ajustement pour placer l'info-bulle au-dessus de la souris
                    tooltip.style.display = 'block'; // Afficher l'info-bulle lorsque survolé
                });

                info.el.addEventListener('mouseout', function() {
                    tooltip.style.display = 'none'; // Cacher l'info-bulle lorsque la souris quitte l'événement
                });
            }
    	  });
    	  calendar.render();
    	});

        window.onload = function() {
            fetch('/DJ-Agenda-2/api/controller/event')
                .then(response => response.json())
                .then(data => {
                    // Extraire les valeurs des champs souhaités
                    const places = data.places;
                    const djs = data.djs;

                    // Afficher les valeurs des champs dans la page HTML
                    document.getElementById('places').textContent = places.join(', ');
                    document.getElementById('djs').textContent = djs.join(', ');
                })
                .catch(error => console.error('Erreur :', error));
        };
    </script>
</head>
<body>
    <h1>Événements DJ</h1>
    <p>Lieux : <span id="places"></span></p>
    <p>DJs : <span id="djs"></span></p>
    
    <!-- Ajouter un formulaire pour ajouter un événement -->
	<form action="/DJ-Agenda-2/api/controller/event" method="post">
		<label for="dj">DJ :</label>
		<input type="text" id="dj" name="dj" required>
		<label for="place">Club :</label>
		<input type="text" id="place" name="place" required>
		<label for="ville">Ville :</label>
		<input type="text" id="ville" name="ville" required>
		<label for="jour_debut">Début :</label>
		<input type="date" id="jour_debut" name="jour_debut" required>
		<input type="time" id="heure_debut" name="heure_debut">
		<label for="jour_fin">Fin :</label>
		<input type="date" id="jour_fin" name="jour_fin" required>
		<input type="time" id="heure_fin" name="heure_fin" required>
		<button type="submit">Ajouter</button>
	</form>
	<br>
	<div id='calendar'></div>
</body>
</html>